<workflow-app name="${appName}" xmlns="uri:oozie:workflow:0.5">

    <start to="build_tiers_process"/>

    <fork name="build_tiers_process">
        <path start="sub-wf-build-tiers-pm"/>
        <path start="sub-wf-build-tiers-pp"/>
    </fork>

    <action name="sub-wf-build-tiers-pm">
        <sub-workflow>
            <app-path>${pom.businessviews.hdfs.oozie.workflow_dir}/workflow-build-tiers-pm.xml
            </app-path>
            <propagate-configuration />
        </sub-workflow>
        <ok to="build_tiers_process_end" />
        <error to="kill" />
    </action>

    <action name="sub-wf-build-tiers-pp">
        <sub-workflow>
            <app-path>${pom.businessviews.hdfs.oozie.workflow_dir}/workflow-build-tiers-pp.xml
            </app-path>
            <propagate-configuration />
        </sub-workflow>
        <ok to="build_tiers_process_end" />
        <error to="kill" />
    </action>

    <join name="build_tiers_process_end" to="end"/>

    <kill name="kill">
        <message>Action failed, error message[${wf:errorMessage(wf:lastErrorNode())}]</message>
    </kill>
    <end name="end"/>

</workflow-app>